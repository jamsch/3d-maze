THREE.OBJMTLLoader=function(){},THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(a,b,c,d,e){var f=this,g=new THREE.MTLLoader(a.substr(0,a.lastIndexOf("/")+1));g.load(b,function(b){var d=b;d.preload();var e=new THREE.XHRLoader(f.manager);e.setCrossOrigin(this.crossOrigin),e.load(a,function(a){var b=f.parse(a);b.traverse(function(a){if(a instanceof THREE.Mesh&&a.material.name){var b=d.create(a.material.name);b&&(a.material=b)}}),c(b)})})},parse:function(a,b){function d(a,b,c){return new THREE.Vector3(a,b,c)}function e(a,b){return new THREE.Vector2(a,b)}function f(a,b,c,d){return new THREE.Face3(a,b,c,d)}function g(a,b){j.vertices.length>0&&(j.mergeVertices(),j.computeCentroids(),j.computeFaceNormals(),j.computeBoundingSphere(),i.add(l),j=new THREE.Geometry,l=new THREE.Mesh(j,k),n=0),void 0!==a&&(l.name=a),void 0!==b&&(k=new THREE.MeshLambertMaterial,k.name=b,l.material=k)}a=a.replace(/\ \\\r\n/g,"");var c="/f$1$2$4\n/f$2$3$4";a=a.replace(/f( +\d+)( +\d+)( +\d+)( +\d+)/g,c),a=a.replace(/f( +\d+\/\d+)( +\d+\/\d+)( +\d+\/\d+)( +\d+\/\d+)/g,c),a=a.replace(/f( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)/g,c),a=a.replace(/f( +\d+\/\/\d+)( +\d+\/\/\d+)( +\d+\/\/\d+)( +\d+\/\/\d+)/g,c);for(var h=new THREE.Object3D,i=h,j=new THREE.Geometry,k=new THREE.MeshLambertMaterial,l=new THREE.Mesh(j,k),m=[],n=0,o=[],p=[],q=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,r=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,s=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,t=/f( +\d+)( +\d+)( +\d+)/,u=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))/,v=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))/,w=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))/,x=a.split("\n"),y=0;y<x.length;y++){var z=x[y];z=z.trim();var A;if(0!==z.length&&"#"!==z.charAt(0))if(null!==(A=q.exec(z)))m.push(d(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])));else if(null!==(A=r.exec(z)))o.push(d(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])));else if(null!==(A=s.exec(z)))p.push(e(parseFloat(A[1]),parseFloat(A[2])));else if(null!==(A=t.exec(z)))j.vertices.push(m[parseInt(A[1])-1],m[parseInt(A[2])-1],m[parseInt(A[3])-1]),j.faces.push(f(n++,n++,n++));else if(null!==(A=u.exec(z)))j.vertices.push(m[parseInt(A[2])-1],m[parseInt(A[5])-1],m[parseInt(A[8])-1]),j.faces.push(f(n++,n++,n++)),j.faceVertexUvs[0].push([p[parseInt(A[3])-1],p[parseInt(A[6])-1],p[parseInt(A[9])-1]]);else if(null!==(A=v.exec(z)))j.vertices.push(m[parseInt(A[2])-1],m[parseInt(A[6])-1],m[parseInt(A[10])-1]),j.faces.push(f(n++,n++,n++,[o[parseInt(A[4])-1],o[parseInt(A[8])-1],o[parseInt(A[12])-1]])),j.faceVertexUvs[0].push([p[parseInt(A[3])-1],p[parseInt(A[7])-1],p[parseInt(A[11])-1]]);else if(null!==(A=w.exec(z)))j.vertices.push(m[parseInt(A[2])-1],m[parseInt(A[5])-1],m[parseInt(A[8])-1]),j.faces.push(f(n++,n++,n++,[o[parseInt(A[3])-1],o[parseInt(A[6])-1],o[parseInt(A[9])-1]]));else if(/^o /.test(z))i=new THREE.Object3D,i.name=z.substring(2).trim(),h.add(i);else if(/^g /.test(z))g(z.substring(2).trim(),void 0);else if(/^usemtl /.test(z))g(void 0,z.substring(7).trim());else if(/^mtllib /.test(z)){if(b){var B=z.substring(7);B=B.trim(),b(B)}}else/^s /.test(z)||console.log("THREE.OBJMTLLoader: Unhandled line "+z)}return g(void 0,void 0),h}},THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype);